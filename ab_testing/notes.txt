##############################
Bayesian machine learning    #
A/B testing                  #
##############################


           P(A,B) 
  P(A|B) = ------
            P(B)


- P(A|B) => conditional
- P(A,B) => joint
- P(B)   => marginal


Example:

    A = {Buy or not buy}    B = {USA, Canada, Mexico}

    We want to find P(Buy?|Country)

          CA    US    MX 
    Buy
     1    20    50    10

     0    300   500   200
     ---------------------
          320   550   210  = 1080


        Eg? P(Buy|CA) ==> P(Buy,CA) / P(CA) = 20/1080 /  320/1080 = 20/320 = 0.0625
        Eg? P(Not Buy|CA) ==> P(Not Buy,CA) / P(CA) = 300/1080 /  320/1080 = 300/320 = 0.937

    -----------------------------------------

        P(A|B) = P(A,B) / P(B)
        P(B|A) = P(B,A) / P(A)
        
        Since P(A,B) = P(B,A)

            ||
            \/

        P(A|B) * P(B) = P(B|A) * P(A)   //  divide by P(B) both sides
       
     ----------------------------------- 
     |  P(A|B) = P(B|A) * P(A) / P(B)  | 
     -----------------------------------
    
    -----------------------------------------
        
Usually we do not have P(B) directly but can calculate it (discrete prob distribution):

    P(B) = sum( P(A,B) for every A) = sum( P(B|A)*P(A)  for every A)

If working with continous prob distributions then the sum turns into an integral:

    P(A|B) = P(B|A) * P(A) / integral(P(B|A)*P(A), A)


Gambler's fallacy: Thinking things will even out at the end. Lets say you hae already lost 15 times and think you will make up for it in the end.
=================

Monty Hall Problem:
==================

3 doors: 1 door has a car and the other 2 has goats.

1) you pick a door (but you do not get to see what is behind the door) (door #1)
2) Monty Hall opens a door you did not pick which will reveal a goat (door #2)
3) You are given a choice: stay with door #1 or switch to door #3.

    Which one do you choose?

C => where the car really is
H => door Monty Hall opens

Assume he opens door #2. We picked door #1 initially. 
If the car is in the door 1 he can choose with prob 0.5 whether to open door 2 or 3.
If the car is in the door 2 he will have no choice to open door number 2.
If the car is in door 3 he will have to choose with prob 1 to choose door number 2.

P(H=2|C=1) = 0.5
P(H=2|C=2) = 0
P(H=2|C=3) = 1

Calculate:
P(C=1|H=2) , P(C=3|H=2)

P(C=3|H=2) = P(H=2|C=3) * P(C=3) / [ P(H=2|C=1)*P(C=1) + P(H=2|C=2)*P(C=2) + P(H=2|C=3)*P(C=3)] = 
                        = 1 * 1/3 / (0.5*1/3 + 0*1/3 + 1*1/3) = 2/3

P(C=1|H=2) = P(H=2|C=1) * P(C=1) / [ P(H=2|C=1)*P(C=1) + P(H=2|C=2)*P(C=2) + P(H=2|C=3)*P(C=3)] =
                        = 1/2 * 1/3 / (0.5*1/3 + 0*1/3 + 1*1/3) = 1/6 / 3/6 = 6/18 = 1/3 

So it always makes sense to switch doors!



True positive rate: 
-------------------
    Probability that we predict something to be true that is actually true.
    P(predict=1|disease=1)


    P(pred=1|disease=1) = P(pred=1,disease=1) / P(disease=1)



























